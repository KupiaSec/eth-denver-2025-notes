# Diving Into Shallow Markets: Why Liquidity Depth Matters Less Than You Think

**Speakers:** Will Fey - Ammalgam


*Upload Date: 20250227*

*Source: [https://www.youtube.com/watch?v=Ji7_6BCV5ww](https://www.youtube.com/watch?v=Ji7_6BCV5ww)*

## Main Points

- **Shallow Markets and Price Manipulation**: Shallow markets are susceptible to price manipulation, leading to issues like the infinite money attack. This is a significant problem in decentralized finance (DeFi) lending protocols.
- **Price Feed Mechanisms**: Traditional approaches to price feeds, such as relying on centralized oracles, can be manipulated. The speaker proposes using a range-based approach and time-weighted average prices to mitigate this.
- **Quadratic Fee Structure**: Implementing a quadratic fee structure for swaps can help reduce the impact of large trades and make manipulation more expensive.
- **Slippage and Position Size**: The protocol calculates slippage for each position to determine the required collateral, protecting against risky loans.
- **Permissionless Lending**: The speaker is excited about launching a permissionless lending protocol that allows lending on any asset, pushing the boundaries of DeFi.

## Key Insights

- **Price Manipulation Risks**: The speaker highlights the risks of price manipulation in shallow markets, which can lead to significant financial losses through attacks like the infinite money attack. They propose using a range-based price feed and quadratic fees to mitigate these risks.
- **Quadratic Fees for Slippage**: By implementing quadratic fees, the protocol can make it more expensive to manipulate prices through large trades, thus protecting against such attacks.
- **Slippage Calculation**: The protocol calculates slippage for each position to determine the required collateral, ensuring that larger, riskier loans require more collateral.
- **Permissionless Lending**: The speaker is excited about launching a permissionless lending protocol that allows lending on any asset, which they believe will push the boundaries of DeFi.

## Practical Takeaways

1. **Implement Range-Based Price Feeds**: Use a range-based approach and time-weighted average prices to mitigate price manipulation risks.
2. **Adopt Quadratic Fee Structures**: Implement quadratic fees for swaps to make manipulation more expensive and protect against large trades.
3. **Calculate Slippage for Collateral**: Calculate slippage for each position to determine the required collateral, ensuring that larger, riskier loans require more collateral.
4. **Explore Permissionless Lending**: Consider launching a permissionless lending protocol to allow lending on any asset, pushing the boundaries of DeFi.

## Additional Notes

- The speaker emphasizes the importance of mitigating price manipulation risks in shallow markets, which can lead to significant financial losses through attacks like the infinite money attack.
- They propose using a range-based price feed and quadratic fees to mitigate these risks and protect against large trades.
- The protocol calculates slippage for each position to determine the required collateral, ensuring that larger, riskier loans require more collateral.
- The speaker is excited about launching a permissionless lending protocol that allows lending on any asset, which they believe will push the boundaries of DeFi.